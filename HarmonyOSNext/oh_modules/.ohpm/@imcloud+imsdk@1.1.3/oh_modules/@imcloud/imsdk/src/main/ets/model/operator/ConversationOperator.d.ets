import { IMResult } from '../../api/bean/IMHandlerResult';
import { ConversationChangeReason } from '../../api/const/consts';
import { Conversation } from '../../api/model/Conversation';
import { Member } from '../../api/model/Member';
import { SilentMemberInfo } from '../../api/model/SilentMemberInfo';
import { im_proto } from '../../api/proto';
import { IMSdkContext } from '../../client/IMSdkContext';
import { IMSdkBaseObject } from '../../core/IMSdkBaseObject';
import { IConversationOperator } from './IConversationOperator';
import LightWeightMap from '@ohos.util.LightWeightMap';
import { IConversationObserver } from '../../observer/IConversationObserver';
/**
 * ä¼šè¯æ“ä½œï¼šæ›´æ–°ç¾¤åç§°ã€æ·»åŠ æŸ¥è¯¢ç¾¤æˆå‘˜ç­‰ç­‰
 */
export declare class ConversationOperator extends IMSdkBaseObject implements IConversationOperator {
    constructor(context: IMSdkContext);
    register(observer: IConversationObserver): void;
    unregister(observer: IConversationObserver): void;
    /**
     * æ ‡è®°ä¼šè¯å·²è¯»
     * @returns è¿”å›å½“å‰çš„ä¼šè¯æ•°æ®ç»“æ„
     */
    markConversationRead(conId: string): Promise<Nullable<Conversation>>;
    /**
     * æŸ¥è¯¢ä¼šè¯çš„ç®¡ç†å‘˜ä¿¡æ¯
     * @returns è¿”å›ä¼šè¯ç®¡ç†å‘˜memberæ•°ç»„æ•°æ®ç»“æ„
     */
    queryGroupManagerList(conId: string): Promise<Nullable<Member[]>>;
    /**
     * æŸ¥è¯¢ä¼šè¯çš„æ‰€æœ‰æˆå‘˜ä¿¡æ¯
     * @returns è¿”å›ä¼šè¯æ‰€æœ‰æˆå‘˜memberæ•°ç»„æ•°æ®ç»“æ„
     */
    queryMemberList(conId: string): Promise<Nullable<Member[]>>;
    /**
     * æŸ¥è¯¢æŒ‡å®šuidçš„ç¾¤æˆå‘˜
     * @param uid ç”¨æˆ·id
     * @returns è¿”å›ç”¨æˆ·idå¯¹åº”çš„memberæ•°æ®ç»“æ„
     */
    queryMember(conId: string, uid: string): Promise<Nullable<Member>>;
    /**
     * å°†toAddUserIdListæ‹‰è¿›ä¼šè¯ç¾¤èŠ
     * @param convShortId ä¼šè¯shortIdï¼Œç›®å‰æŠ–éŸ³ç¾¤èŠconvShortIdä¸convIdç›¸ç­‰
     * @param toAddMembersUidList æœŸæœ›åŠ å…¥ç¾¤èŠçš„ç”¨æˆ·uid
     * @param bizExtMap é…ç½®ä¿¡æ¯Mapç»“æ„
     * @param convType ä¼šè¯çš„Typeï¼Œé»˜è®¤æ˜¯ @see im_proto.ConversationType.GROUP_CHAT
     * @param inboxType é»˜è®¤æ˜¯ @see InBoxType.DEFAULT
     * @returns åŠ å…¥ç¾¤èŠçš„memberæ•°æ®ç»“æ„list
     */
    addMember(conId: string, convShortId: bigint, toAddMembersUidList: string[], bizExtMap: Map<string, string>, convType?: number, inboxType?: number): Promise<IMResult<Member[]>>;
    /**
     * å°†uidListç¾¤æˆå‘˜è¸¢å‡ºç¾¤èŠ
     * @param uidList å¾…æ“ä½œçš„ç¾¤æˆå‘˜
     * @param bizExt ä¸šåŠ¡å‚æ•°ã€ç›®å‰æŠ–éŸ³ä¸Šå±‚ä½¿ç”¨äº†LightWeightMapæ•°æ®ç»“æ„è€Œä¸æ˜¯Map
     * @returns æ“ä½œæˆåŠŸåˆ™è¿”å›uidListä¸­å·²è¸¢å‡ºç¾¤èŠçš„memberåˆ—è¡¨æ•°æ®ç»“æ„
     */
    removeMember(conId: string, uidList: string[], bizExt?: Map<string, string> | LightWeightMap<string, string>): Promise<IMResult<Member[]>>;
    /***
     * æ›´æ–°ç¾¤æˆå‘˜
     * @param member å¾…æ›´æ–°çš„æˆå‘˜æ•°æ®ç»“æ„
     * @returns æ“ä½œæˆåŠŸè¿”å›true
     */
    updateMember(conId: string, member: Member): Promise<Nullable<boolean>>;
    /***
     * æ›´æ–°ç¾¤å…¬å‘Š
     * @param notice ä¼ ç©ºå­—ç¬¦ä¸²æ„å‘³ç€æ¸…é™¤ç¾¤å…¬å‘Š
     * @returns æ“ä½œæˆåŠŸåˆ™è¿”å›å¯¹åº”ä¼šè¯çš„æ•°æ®ç»“æ„
     */
    updateNotice(conId: string, notice: string): Promise<IMResult<Conversation>>;
    /***
     * è®¾ç½®ä¼šè¯åç§°
     * @param name ä¼ ç©ºå­—ç¬¦ä¸²æ„å‘³ç€æ¸…é™¤åç§°è®¾ç½®
     * @returns æ“ä½œæˆåŠŸåˆ™è¿”å›å¯¹åº”ä¼šè¯çš„æ•°æ®ç»“æ„
     */
    updateName(conId: string, name: string): Promise<IMResult<Conversation>>;
    /***
     * è®¾ç½®ä¼šè¯å¤´åƒ
     * @param name ä¼ ç©ºå­—ç¬¦ä¸²æ„å‘³ç€æ¸…é™¤å¤´åƒè®¾ç½®
     * @returns æ“ä½œæˆåŠŸåˆ™è¿”å›å¯¹åº”ä¼šè¯çš„æ•°æ®ç»“æ„
     */
    updateIcon(conId: string, icon: string): Promise<IMResult<Conversation>>;
    /***
     * è®¾ç½®ä¼šè¯æè¿°
     * @param name ä¼ ç©ºå­—ç¬¦ä¸²æ„å‘³ç€æ¸…é™¤æè¿°è®¾ç½®
     * @returns æ“ä½œæˆåŠŸåˆ™è¿”å›å¯¹åº”ä¼šè¯çš„æ•°æ®ç»“æ„
     */
    updateDesc(conId: string, desc: string): Promise<IMResult<Conversation>>;
    /**
     * è®¾ç½®ä¼šè¯ç½®é¡¶çŠ¶æ€ï¼šç½®é¡¶æˆ–å–æ¶ˆç½®é¡¶
     * @param top ä¸ºtrueåˆ™è®¾ç½®ä¼šè¯ç½®é¡¶ï¼›å¦åˆ™å–æ¶ˆç½®é¡¶
     * @returns æ“ä½œæˆåŠŸåˆ™è¿”å›å¯¹åº”ä¼šè¯çš„æ•°æ®ç»“æ„
     */
    stickTop(conId: string, top: boolean): Promise<IMResult<Conversation>>;
    /**
     * è®¾ç½®ä¼šè¯é™éŸ³/å…æ‰“æ‰°çŠ¶æ€ï¼šå¼€å¯å…æ‰“æ‰°æˆ–å–æ¶ˆå…æ‰“æ‰°
     * @param mute ä¸ºtrueåˆ™è®¾ç½®ä¼šè¯å¤„äºå…æ‰“æ‰°æ¨¡å¼ï¼›å¦åˆ™å–æ¶ˆå…æ‰“æ‰°
     * @returns æ“ä½œæˆåŠŸåˆ™è¿”å›å¯¹åº”ä¼šè¯çš„æ•°æ®ç»“æ„
     */
    mute(conId: string, mute: boolean): Promise<IMResult<Conversation>>;
    /**
     * æ›´æ–°ä¼šè¯å…¨å±€é…ç½®çš„é™„åŠ ä¿¡æ¯ï¼Œåªå¤„ç†ç‰¹å®šçš„key-value
     * å¦‚æœå¸Œæœ›å…¨é‡æ›´æ–°ä¼šè¯å…¨å±€é…ç½®åˆ™ä½¿ç”¨extMapğŸ‘‡
     * @see upsertCoreExtMap
     * @param key
     * @param value
     * @returns å¦‚æœæ›´æ–°æˆåŠŸï¼Œä¼šè¿”å›å½“å‰ä¼šè¯æ•°æ®ç»“æ„ï¼›å¦‚æœå¤±è´¥ï¼Œåˆ™è¿”å›undefined
     */
    upsertCoreExtKv(conId: string, key: string, value: string): Promise<Nullable<Conversation>>;
    /**
     * æ›´æ–°ä¼šè¯å…¨å±€é…ç½®çš„é™„åŠ ä¿¡æ¯ï¼Œæ³¨æ„ä¼šå…¨é‡è¦†ç›–æ›´æ–°
     * è½»é‡çš„æ•°æ®æ›´æ–°å»ºè®®ä»…æ›´æ–°å¯¹åº”çš„ key-valueğŸ‘‡
     * @see upsertCoreExtKv
     * @param ext  é™„åŠ ä¿¡æ¯å­—æ®µï¼Œæ³¨æ„ä¼šå…¨é‡è¦†ç›–æ›´æ–°ã€‚å¦‚æœéœ€è¦æ¸…é™¤åŸæ¥çš„èµ‹å€¼ï¼Œextçš„valueä¼ ç©ºå­—ç¬¦ä¸²å³å¯
     * @returns å¦‚æœæ›´æ–°æˆåŠŸï¼Œä¼šè¿”å›å½“å‰ä¼šè¯æ•°æ®ç»“æ„ï¼›å¦‚æœå¤±è´¥ï¼Œåˆ™è¿”å›undefined
     */
    upsertCoreExtMap(conId: string, ext: Map<string, string>): Promise<Nullable<Conversation>>;
    /**
     * è½»é‡æ›´æ–°ä¼šè¯ä¸ªäººç»´åº¦çš„é…ç½®é™„åŠ ä¿¡æ¯ï¼Œåªæ›´æ–°ç‰¹å®šçš„key-value
     * @param key
     * @param value
     * @returns å¦‚æœæ›´æ–°æˆåŠŸï¼Œä¼šè¿”å›å½“å‰ä¼šè¯æ•°æ®ç»“æ„ï¼›å¦‚æœå¤±è´¥ï¼Œåˆ™è¿”å›undefined
     */
    upsertSettingExtKv(conId: string, key: string, value: string): Promise<Nullable<Conversation>>;
    /**
     * å…¨é‡æ›´æ–°ä¼šè¯ä¸ªäººç»´åº¦çš„å…¨éƒ¨é…ç½®é™„åŠ ä¿¡æ¯
     * è½»é‡çš„æ•°æ®æ›´æ–°å»ºè®®ä½¿ç”¨ upsertSettingKv
     * @param convId
     * @param ext æ–°çš„é…ç½®ä¿¡æ¯ï¼Œserverä¼šç›´æ¥ä½¿ç”¨å…¶ä½œä¸ºä¼šè¯çš„æœ€æ–°é…ç½®ä¿¡æ¯
     * @returns å¦‚æœæ›´æ–°æˆåŠŸï¼Œä¼šè¿”å›å½“å‰ä¼šè¯æ•°æ®ç»“æ„ï¼›å¦‚æœå¤±è´¥ï¼Œåˆ™è¿”å›undefined
     */
    upsertSettingExtMap(conId: string, ext: Map<string, string>): Promise<Nullable<Conversation>>;
    /**
     * è®¾ç½®ç¾¤æˆå‘˜çš„æƒé™
     * @param uid ç”¨æˆ·id
     * @param role æƒé™ç­‰çº§ä¼ 0æ—¶ï¼Œæ„å‘³ç€æ¸…é™¤æƒé™è®¾ç½®ã€å³è®¾ç½®ä¸ºæ™®é€šæˆå‘˜
     * @param bizExtMap ä¸šåŠ¡å‚æ•°ä¿¡æ¯
     * @returns å¦‚æœæ›´æ–°æˆåŠŸï¼Œä¼šè¿”å›uidå¯¹åº”çš„æˆå‘˜memberæ•°æ®ç»“æ„ï¼›å¦åˆ™è¿”å›undefined
     */
    setMemberRole(conId: string, uid: string, role: im_proto.GroupRole, bizExtMap?: Nullable<Map<string, string>>): Promise<IMResult<Member>>;
    /**
     * ä¿®æ”¹ä¼šè¯æˆå‘˜åœ¨è¯¥ä¼šè¯ä¸­çš„æ˜µç§°
     * @param uid ç”¨æˆ·id
     * @param alias ç”¨æˆ·æ˜µç§° ä¼ ç©ºå­—ç¬¦ä¸²æ—¶ï¼Œæ„å‘³ç€æ¸…é™¤æ˜µç§°è®¾ç½®
     * @param bizExtMap
     * @returns
     */
    changeMemberAlias(conId: string, uid: string, alias: string, bizExtMap?: Nullable<Map<string, string>>): Promise<IMResult<Member>>;
    /**
     * æ‰¹é‡è®¾ç½®ç¾¤æˆå‘˜ç¦è¨€
     * @param silentMemberInfo å¾…ç¦è¨€ç¾¤æˆå‘˜
     * @param bizExtMap ä¸šåŠ¡é™„åŠ å‚æ•°ä¿¡æ¯
     * @returns å‚æ•°å¼‚å¸¸è¿”å›undefinedï¼›æ“ä½œæˆåŠŸåˆ™è¿”å›ç©ºçš„bigintåˆ—è¡¨ï¼›æ“ä½œå¤±è´¥åˆ™è¿”å›å¤±è´¥çš„ç”¨æˆ·uidåˆ—è¡¨
     */
    setMemberSilent(conId: string, silentMemberInfo: SilentMemberInfo[], bizExtMap?: Map<string, string>): Promise<IMResult<bigint[]>>;
    /**
     * æ‰¹é‡è§£é™¤ç¾¤æˆå‘˜ç¦è¨€
     * @param silentMemberInfo å¾…è§£é™¤ç¦è¨€çš„ç¾¤æˆå‘˜
     * @param bizExtMap ä¸šåŠ¡é™„åŠ å‚æ•°ä¿¡æ¯
     * @returns å‚æ•°å¼‚å¸¸è¿”å›undefinedï¼›æ“ä½œæˆåŠŸåˆ™è¿”å›ç©ºçš„bigintåˆ—è¡¨ï¼›æ“ä½œå¤±è´¥åˆ™è¿”å›å¤±è´¥çš„ç”¨æˆ·uidåˆ—è¡¨
     */
    setMemberUnSilent(conId: string, silentMemberInfo: SilentMemberInfo[], bizExtMap?: Map<string, string>): Promise<IMResult<bigint[]>>;
    /**
     * ä¼ å…¥uidListã€å°†è¯¥ç¾¤æˆå‘˜åˆ—è¡¨è§£é™¤ç¦è¨€
     * @param uidList å¾…è§£é™¤ç¦è¨€çš„ç¾¤æˆå‘˜åˆ—è¡¨
     * @param bizExtMap ä¸šåŠ¡é™„åŠ å‚æ•°ä¿¡æ¯
     * @returns å‚æ•°å¼‚å¸¸è¿”å›undefinedï¼›æ“ä½œæˆåŠŸåˆ™è¿”å›ç©ºçš„bigintåˆ—è¡¨ï¼›æ“ä½œå¤±è´¥åˆ™è¿”å›å¤±è´¥çš„ç”¨æˆ·uidåˆ—è¡¨
     */
    setMemberUnSilentByUid(conId: string, uidList: string[], bizExtMap?: Map<string, string>): Promise<IMResult<bigint[]>>;
    /**
     * è®¾ç½®ä¼šè¯ç¦è¨€çŠ¶æ€
     * @param isSilent true ä¼šè¯ç¦è¨€ï¼›false è§£é™¤ç¦è¨€
     * @returns è¿”å›trueä»£è¡¨æ“ä½œæˆåŠŸï¼›undefinedä¸ºå‚æ•°å¼‚å¸¸ã€è¯·æ±‚æœªå‘å‡ºï¼›falseä»£è¡¨æ¥å£æ“ä½œå¤±è´¥
     */
    setConversationSilent(conId: string, isSilent: boolean, silentNormalOnly: boolean): Promise<IMResult<boolean>>;
    /**
     * è§£é™¤ä¼šè¯/ç¾¤èŠ
     * @param deleteLocal true æ ‡è®°åˆ é™¤ï¼›false è§£é™¤ä¼šè¯
     * @param needPullConv true å¦‚æœæœ¬åœ°æ²¡æœ‰ä¼šè¯åˆ™ä¼šæ‹‰å–ç¾¤èŠä¼šè¯ä¿¡æ¯
     * @returns è¿”å›trueä»£è¡¨æ“ä½œæˆåŠŸï¼›undefinedä¸ºå‚æ•°å¼‚å¸¸ã€è¯·æ±‚æœªå‘å‡ºï¼›falseä»£è¡¨æ¥å£æ“ä½œå¤±è´¥
     */
    dissolve(conId: string, deleteLocal: boolean, needPullConv: boolean): Promise<IMResult<string>>;
    /**
     * é€€å‡ºç¾¤èŠ
     * @param isReqDelete æ˜¯å¦è¯·æ±‚æ¥å£æ‰§è¡Œåˆ é™¤ä¼šè¯è¯·æ±‚
     * @returns è¿”å›trueä»£è¡¨æ“ä½œæˆåŠŸï¼›undefinedä¸ºå‚æ•°å¼‚å¸¸ã€è¯·æ±‚æœªå‘å‡ºï¼›falseä»£è¡¨æ¥å£æ“ä½œå¤±è´¥
     */
    leave(conId: string, isReqDelete?: boolean): Promise<IMResult<boolean>>;
    /**
     * è·å–ç¾¤ç®¡ç†ä¿¡æ¯
     */
    getGroupManagementInfo(conID: string, typeList: number[], useLocalCache: boolean): Promise<IMResult<im_proto.IGetGroupManagerInfoResponseBody>>;
    /**
     * æ‰¹é‡è®¾ç½®ç¾¤æˆå‘˜çš„æƒé™
     * @param convId
     * @param toUpdateUidList
     * @param role
     * @param map
     * @returns ä¿®æ”¹æˆåŠŸåè¿”å›æ‰€æœ‰æ›´æ–°æˆåŠŸçš„æˆå‘˜Memberç»“æ„ï¼›å¦åˆ™è¿”å›undefined
     */
    batchChangeMemberRole(conId: string, toUpdateUidList: string[], role: im_proto.GroupRole, map?: Nullable<Map<string, string>>): Promise<Nullable<Member[]>>;
    /**
     * åœ¨ä¼šè¯localKVMapä¸­åŠ å…¥ä¸šåŠ¡éœ€è¦çš„å­—æ®µï¼Œä»…å®¢æˆ·ç«¯æœ¬åœ°ä½¿ç”¨ã€ä¸ä¼šå‘ç½‘ç»œè¯·æ±‚
     * @param key
     * @param value
     * @returns æ“ä½œæˆåŠŸåˆ™è¿”å›å¯¹åº”ä¼šè¯çš„æ•°æ®ç»“æ„
     */
    addLocalKV(conId: string, key: string, value: string): Promise<Nullable<Conversation>>;
    /**
     * ä¿å­˜è‰ç¨¿
     * @param draftContent
     * @returns æ“ä½œæˆåŠŸåˆ™è¿”å›å¯¹åº”ä¼šè¯çš„æ•°æ®ç»“æ„; å¦åˆ™è¿”å›undefined
     */
    saveDraft(conId: string, draftContent: string): Promise<Nullable<Conversation>>;
    /**
     * æ›´æ–°æœ¬åœ°æ•°æ®åº“çš„ä¼šè¯çš„localExt, ä»…æ›´æ–°æŒ‡å®šçš„key-value
     * @param key
     * @param value
     * @returns æ“ä½œæˆåŠŸåˆ™è¿”å›å¯¹åº”ä¼šè¯çš„æ•°æ®ç»“æ„; å¦åˆ™è¿”å›undefined
     */
    updateLocalExtKv(conId: string, key: string, value: string): Promise<Nullable<Conversation>>;
    /**
     * æ›´æ–°æœ¬åœ°æ•°æ®åº“çš„ä¼šè¯çš„localExt, å…¨é‡æ›´æ–°
     * @param localExt
     * @returns æ“ä½œæˆåŠŸåˆ™è¿”å›å¯¹åº”ä¼šè¯çš„æ•°æ®ç»“æ„; å¦åˆ™è¿”å›undefined
     */
    updateLocalExtMap(conId: string, localExt: Map<string, string>): Promise<Nullable<Conversation>>;
    /**
     * æ›´æ–°æœ¬åœ°æ•°æ®åº“çš„ä¼šè¯çš„setting ext
     * @returns æ“ä½œæˆåŠŸåˆ™è¿”å›å¯¹åº”ä¼šè¯çš„æ•°æ®ç»“æ„; å¦åˆ™è¿”å›undefined
     */
    updateLocalSettingExt(conId: string): Promise<Nullable<Conversation>>;
    /**
     * æ›´æ–°æœ¬åœ°æ•°æ®åº“çš„ä¼šè¯å…¨å±€é…ç½®ä¿¡æ¯ core ext
     * @returns æ“ä½œæˆåŠŸåˆ™è¿”å›å¯¹åº”ä¼šè¯çš„æ•°æ®ç»“æ„; å¦åˆ™è¿”å›undefined
     */
    updateLocalCoreInfoExt(conId: string): Promise<Nullable<Conversation>>;
    /**
     * æ›´æ–°ä¼šè¯æ’åºä¾æ®çš„æ—¶é—´æˆ³
     * @param orderTimestamp
     * @returns true æ ‡è¯†æˆåŠŸ
     */
    updateOrderTimestamp(conId: string, orderTimestamp: number): Promise<Nullable<boolean>>;
    /**
     * æ›´æ–°ä¼šè¯åˆ¤æ–­æœªè¯»æ•°é™çº§çš„æ—¶é—´æˆ³
     * @param unreadDemoteTime
     * @returns true æ ‡è¯†æˆåŠŸ
     */
    updateUnreadDemoteTime(conId: string, unreadDemoteTime: number): Promise<Nullable<boolean>>;
    /**
     * å¯¹é½Androidçš„æ–¹æ³•
     * @param conversation
     */
    updateConversation(conversation: Nullable<Conversation>, updateChangeReason?: ConversationChangeReason): Promise<void>;
    /**
     * æ›´æ–°ç¾¤èŠè®¾ç½®ä¿¡æ¯
     * @param params
     * @returns
     */
    updateGroup(conID: string, type: number, value: Nullable<string>): Promise<IMResult<boolean>>;
    /**
     * æ ¹æ®ä¼šè¯IDæŸ¥è¯¢ä¼šè¯æ•°æ®ï¼šå†…å­˜ -> æ•°æ®åº“ -> ç½‘ç»œ
     * @param conversationId æŸ¥è¯¢çš„ä¼šè¯id
     * @return æŸ¥è¯¢å¾—åˆ°çš„ä¼šè¯
     */
    getConversationByCid(conversationId: string, memoryFirst?: boolean): Promise<Conversation>;
}
